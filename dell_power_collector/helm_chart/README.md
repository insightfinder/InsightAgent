# Dell Power Collector Kubernetes Release
This is the helm chart for Dell Power Collector helm chart.
Most installation and configuration information can be found inside `values.yaml`

## Installation
1. Edit the `values.yaml`

2. Install using `helm` command
```bash
# For fresh installation
helm install --atomic --create-namespace if-power-collector-agent .

# For upgrade
helm upgrade --atomic if-power-collector-agent .
```
3. Check the pod running logs by
```bash
kubectl logs -f deployment/if-power-collector-agent
```

## Configuration
### Agent configuration
Agent configration are generated by the items under `powerCollectorAgent.config` in `values.yaml` and applied to the configMap automatically.

### Dell Root Certificate Configuration
If the the container is running inside the environment where has trafic/SSL inspection, we need to put the Root CA Certificate inside the container so that we can access our services using SSL/TLS.
We can simply put the Root CA Certificate inside `templates/CACert.yaml` to make it look like the following:
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: dell-root-ca-cert
  namespace: {{ .Release.Namespace }}
data:
  cert.pem: |
    -----BEGIN CERTIFICATE-----
    ......
    -----END CERTIFICATE-----
```